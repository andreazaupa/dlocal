.box
  %h2
    Traduzione File
    =@locale_file.name
    %strong=@locale_file.locale
  %p
    Completa le traduzioni mancanti e salva il file.
    %br
    Nel caso di testo Markup Ã¨ possibile utilizzare un editor visuale.

= form_for @locale_file, :as => :locale, :url =>translate_locale_file_url, :html => { :method=>:post,:class => "new_post", :id => "new_post" } do |f| 
  =f.submit "Salva il file" ,:class=>"button"
  %table
    %tr
      %th
        =@locale_file.organization.locales
      %th
        =@locale_file.locale
    -@yaml_from.each do |k,v|
      -id_k=k.split(".").join("_")
      %tr
        %th.key= k
        %th
          -if v.match /<\/?[^>]*>/
            =link_to "editor" , "#",{:onclick=> "var h=$('##{id_k}').height();CKEDITOR.replace( '#{id_k}',{height: h} );return false;",:class=>"button"}
            =link_to "close_editor" , "#",{:onclick=>"CKEDITOR.instances['#{id_k}'].destroy();return false;",:class=>"button"}

         
      %tr
        %td.text= raw v
        %td.form= text_area_tag "translate_file[#{k}]",@yaml_to[k],{:rows=>"18",:cols=>"10",:id=>"#{id_k}",:class=>"ckeditor_opt"}
  =f.submit "Salva il file",:class=>"button"


          
%script
  $('.form textarea').each(function(i,el) {
  var h= $(this).parent().parent().find(".text").height();
  $(this).css("height",h);
  });
  